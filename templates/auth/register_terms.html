{% extends "base.html" %}
{% block content %}
<div class="max-w-xl mx-auto p-6 sm:p-8 bg-white shadow-2xl rounded-2xl mt-14 border border-gray-100">
  <!-- í—¤ë” -->
  <div class="text-center mb-8">
    <h2 class="text-3xl font-extrabold text-indigo-700 mb-2">{{ _("ì´ìš©ì•½ê´€ ë™ì˜") }}</h2>
    <p class="text-gray-500 text-sm sm:text-base">
      {{ _("íšŒì›ê°€ì…ì„ ìœ„í•´ ì•„ë˜ ì•½ê´€ì— ë™ì˜í•´ì£¼ì„¸ìš”.") }}
    </p>
  </div>

  <!-- ì•½ê´€ í¼ -->
  <form method="post" class="space-y-5 text-sm sm:text-base">
    <!-- ì „ì²´ ë™ì˜ -->
    <div class="bg-indigo-50 p-4 rounded-lg border border-indigo-100 flex items-center justify-between hover:bg-indigo-100 transition">
      <label class="flex items-center font-semibold text-indigo-800 text-lg cursor-pointer">
        <input type="checkbox" id="agree_all"
               class="w-5 h-5 mr-2 accent-indigo-600 cursor-pointer">
        {{ _("ëª¨ë‘ ë™ì˜í•©ë‹ˆë‹¤") }}
      </label>
      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5-2a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
    </div>

    <hr class="my-4">

    <!-- âœ… ì•½ê´€ í•­ëª©ë“¤ -->
    <div class="space-y-3">
      {% set terms_list = [
        {{ _("('agree_terms', 'ìœ ê°€ëª° êµ¬ë§¤íšŒì› ì´ìš©ì•½ê´€ (í•„ìˆ˜)', 'terms1', True)") }},
        {{ _("('agree_finance', 'ì „ìê¸ˆìœµì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€ ë™ì˜ (í•„ìˆ˜)', 'terms2', True)") }},
        ('agree_privacy', 'ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ë™ì˜ (í•„ìˆ˜)', 'terms3', True),
        ('agree_age', 'ë§Œ 14ì„¸ ì´ìƒì…ë‹ˆë‹¤. (í•„ìˆ˜)', 'terms4', True),
        ('agree_marketing', 'í˜œíƒ ì•Œë¦¼ ì´ë©”ì¼, ë¬¸ì, ì•± í‘¸ì‹œ ìˆ˜ì‹  (ì„ íƒ)', 'terms5', False)
      ] %}
      
      {% for name, label, key, required in terms_list %}
      <div class="flex justify-between items-center bg-gray-50 border border-gray-200 rounded-lg p-3 hover:shadow-sm transition">
        <label class="flex-1 flex items-center cursor-pointer">
          <input type="checkbox" name="{{ name }}" class="agree-item w-4 h-4 accent-indigo-600 mr-3 cursor-pointer" {% if required %}required{% endif %}>
          <span class="{% if required %}text-gray-800{% else %}text-gray-600{% endif %}">
            {{ _(label) }}
          </span>
        </label>
        <button type="button" class="text-indigo-600 hover:text-indigo-800 text-sm font-medium underline"
                onclick="openModal('{{ key }}')">
          {{ _("ë³´ê¸°") }}
        </button>
      </div>
      {% endfor %}
    </div>

    <!-- ë‹¤ìŒ ë‹¨ê³„ ë²„íŠ¼ -->
    <div class="mt-8">
      <button type="submit"
              class="w-full py-3 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 active:scale-[0.98] transition-all shadow-md">
        {{ _("ë‹¤ìŒ ë‹¨ê³„ë¡œ ì´ë™") }}
      </button>
    </div>
  </form>
</div>

<!-- ğŸŒ™ ì•½ê´€ ëª¨ë‹¬ -->
<div id="modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 transition-all">
  <div class="bg-white rounded-xl shadow-2xl max-w-lg w-11/12 sm:w-full p-6 relative animate-fadeIn">
    <h3 id="modal-title" class="text-xl font-bold mb-4 text-indigo-700 flex items-center">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V4a2 2 0 10-4 0v1.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0a3 3 0 01-6 0" />
      </svg>
      {{ _("ì•½ê´€ ìƒì„¸ë³´ê¸°") }}
    </h3>
    <div id="modal-content" class="h-64 overflow-y-auto border rounded p-4 text-sm leading-relaxed bg-gray-50 text-gray-700 shadow-inner"></div>
    <button onclick="closeModal()" class="absolute top-3 right-4 text-gray-400 hover:text-gray-600 text-2xl leading-none">&times;</button>
    <div class="text-right mt-5">
      <button onclick="closeModal()" class="px-6 py-2 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 shadow">
        {{ _("ë‹«ê¸°") }}
      </button>
    </div>
  </div>
</div>

<!-- âœ… JS -->
<script>
  const agreeAll = document.getElementById("agree_all");
  const items = document.querySelectorAll(".agree-item");

  // ì „ì²´ ë™ì˜ â†’ ê°œë³„ ì²´í¬ ë°˜ì˜
  agreeAll.addEventListener("change", function() {
    items.forEach(chk => chk.checked = this.checked);
  });

  // ê°œë³„ ì²´í¬ â†’ ì „ì²´ ë™ì˜ ìƒíƒœ ë°˜ì˜
  items.forEach(chk => {
    chk.addEventListener("change", () => {
      agreeAll.checked = [...items].every(i => i.checked);
    });
  });

  // ì•½ê´€ ë‚´ìš© (ìƒ˜í”Œ)
  const termsData = {
    terms1: "ìœ ê°€ëª° êµ¬ë§¤íšŒì› ì´ìš©ì•½ê´€ ì „ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ìƒí’ˆ êµ¬ë§¤, ê²°ì œ, êµí™˜, í™˜ë¶ˆ ë“± ì „ë°˜ì ì¸ ì´ìš©ì¡°ê±´ì´ í¬í•¨ë©ë‹ˆë‹¤...",
    terms2: "ì „ìê¸ˆìœµì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€ ë‚´ìš©ì…ë‹ˆë‹¤. ê²°ì œ ëŒ€í–‰, ì „ìì§€ê¸‰, ì•ˆì „í•œ ê±°ë˜ ë³´ì¥ì— ê´€í•œ ì•ˆë‚´...",
    terms3: "ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš© ë™ì˜ ì „ë¬¸ì…ë‹ˆë‹¤. ìˆ˜ì§‘í•­ëª©, ë³´ìœ ê¸°ê°„, ì œ3ì ì œê³µ ê´€ë ¨ ì¡°í•­ í¬í•¨...",
    terms4: "ë§Œ 14ì„¸ ì´ìƒì„ì„ í™•ì¸í•©ë‹ˆë‹¤. ë²•ì ìœ¼ë¡œ ë¯¸ì„±ë…„ì ë³´í˜¸ë¥¼ ìœ„í•œ í•„ìˆ˜ ë™ì˜ì‚¬í•­ì…ë‹ˆë‹¤.",
    terms5: "ë§ˆì¼€íŒ…/í˜œíƒ ìˆ˜ì‹  ë™ì˜ ë‚´ìš©ì…ë‹ˆë‹¤. ì´ë©”ì¼, ë¬¸ì, ì•± í‘¸ì‹œë¥¼ í†µí•œ ì´ë²¤íŠ¸ ë° ì¿ í° ì†Œì‹ ì œê³µì— ê´€í•œ ì•ˆë‚´..."
  };

  // ëª¨ë‹¬ ì—´ê¸°
  function openModal(key) {
    const modal = document.getElementById("modal");
    document.getElementById("modal-content").innerText = termsData[key] || "ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.";
    modal.classList.remove("hidden");
  }

  // ëª¨ë‹¬ ë‹«ê¸°
  function closeModal() {
    document.getElementById("modal").classList.add("hidden");
  }
</script>

<!-- âœ… ê°„ë‹¨í•œ fadeIn íš¨ê³¼ -->
<style>
@keyframes fadeIn { from { opacity: 0; transform: scale(0.97); } to { opacity: 1; transform: scale(1); } }
.animate-fadeIn { animation: fadeIn 0.25s ease-in-out; }
</style>

{% endblock %}
